splide_string = `<li class="splide__slide" >
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b7432032ae0ad21dc42f-flag_of_abu-dhab-ok?" style="height: 15px;">
            <h4>Abu Dhabi Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/61b1fdb4ff3bf84501e59f34-abudhabi_homepage?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff2ea7e76151af3bb88c5?" style="height: 15px;">
            <h4>Australian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/624c06442a7e773f1cdda051-australiangp_2022_homepage?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff2ea7e76151af3bb88c5?" style="height: 15px;">
            <h4>Austrian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e5399277e76151af3bc712d-circuit_austria_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e50031ef5d28817071df1e8-flag_of_azerbaijan?" style="height: 15px;">
            <h4>Azerbaijan Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e50028105f28718b691f069-circuit_baku_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff7bd7e76151af3bb8a45-flag_of_bahrain?" style="height: 15px;">
            <h4>Bahrain Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff69c2032ae0ad21cd437-circuit_bahrain_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://www.recon-company.com/media/image/a1/cd/99/flagge-belgien_91101_1_600x600.jpg" style="height: 15px;">
            <h4>Belgian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a3932032ae0ad21dbe4b-circuit_belgio_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b51205f28718b692dbd4-flag_of_brazil?" style="height: 15px;">
            <h4>Brazilian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b4567e76151af3bc78e8-circuit_brazil_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e539ba22032ae0ad21dbc12-flag_of_uk?" style="height: 15px;">
            <h4>British Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e539ad52032ae0ad21dbbdd-circuit_greatbritain_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e5007487e76151af3bb8f3d?" style="height: 15px;">
            <h4>Canadian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e50073905f28718b691f1c6?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ffada7e76151af3bb8b36?" style="height: 15px;">
            <h4>Chinese Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff9b97e76151af3bb8ae5-circuit_china_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ffcf905f28718b691ee8b-flag_of_olanda?" style="height: 15px;">
            <h4>Dutch Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ffb62f5d28817071def4c-circuit_olanda_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://www.bettingsites.co/wp-content/uploads/Germany-Flag-400px-300x200.png" style="height: 15px;">
            <h4>Eifel Grand Prix</h4>
            <img src="https://media.formula1.com/image/upload/f_auto,c_limit,w_1440,q_auto/f_auto/q_auto/content/dam/fom-website/2018-redesign-assets/Track%20icons%204x3/Germany%20carbon">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5f32910dacefab3ddaeda1e7-flag_of_emilia-romagna?" style="height: 15px;">
            <h4>Emilia Romagna Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/6042487fef115d08ef8ff12a-imola-homepage?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.britannica.com/82/682-004-F0B47FCB/Flag-France.jpg" style="height: 15px;">
            <h4>French Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4fee7af5d28817071deb5d-francia-sector?width=800&height=455">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.britannica.com/97/897-050-0BFECDA5/Flag-Germany.jpg" style="height: 15px;">
            <h4>German Grand Prix</h4>
            <img src="https://a.espncdn.com/i/venues/f1/circuit-info/274.svg">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a26c7e76151af3bc73bd-flag_of_hungary?" style="height: 15px;">
            <h4>Hungarian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a1ae05f28718b692d62f-circuit_hungary_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a7962032ae0ad21dbf61-flag_of_italy?" style="height: 15px;">
            <h4>Italian Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a6adf5d28817071ed879-circuit_italy_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53af59f5d28817071edb0c?" style="height: 15px;">
            <h4>Japanese Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53ae807e76151af3bc772c?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b37b2032ae0ad21dc2e1-flag_of_mexico?" style="height: 15px;">
            <h4>Mexican Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/63e67aeba82465002128b5a4-messico-circuito-settori-v2?width=800&height=455">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b37b2032ae0ad21dc2e1-flag_of_mexico?" style="height: 15px;">
            <h4>Mexico City Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b2b27e76151af3bc786c-circuit_mexico_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b10b05f28718b692dabc-flag_of_usa?" style="height: 15px;">
            <h4>Miami Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/61ddad17a375bb162c157d65-miami_homepage?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e5001a32032ae0ad21cd7b9-flag_of_monaco?" style="height: 15px;">
            <h4>Monaco Grand Prix</h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e5000a87e76151af3bb8d45-circuit_monaco_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Flag_of_Portugal.svg/1200px-Flag_of_Portugal.svg.png" style="height: 15px;">
            <h4>Portuguese Grand Prix</h4>
            <img src="https://prod.r3eassets.com/assets/content/tracklayout/portimao-circuit-moto-1783-image-small.png">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/615ac93d230a0f6fa343bae0-qatar_flag?" style="height: 15px;">
            <h4>Qatar Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/615736f6b4ae216a3a771188?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/f/f3/Flag_of_Russia.svg/1200px-Flag_of_Russia.svg.png" style="height: 15px;">
            <h4>Russian Grand Prix </h4>
            <img src="https://mclaren.bloomreach.io/cdn-cgi/image/format=webp,quality=80/delivery/resources/content/gallery/mclaren-racing/legacy/static_maps/russia-sectors.png">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ff7bd7e76151af3bb8a45-flag_of_bahrain?" style="height: 15px;">
            <h4>Sakhir Grand Prix </h4>
            <img src="https://a.espncdn.com/i/venues/f1/day-dark/7103.svg">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53a9e82032ae0ad21dc005?" style="height: 15px;">
            <h4>Singapore Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/64f8518bf3074000105f335e-singapore-calendario-2023?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4fffecf5d28817071df102-flag_of_spain-ok?" style="height: 15px;">
            <h4>Spanish Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e4ffee82032ae0ad21cd6e7-circuit_spain_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.britannica.com/73/6073-050-4D6FDAF6/Flag-Austria.jpg" style="height: 15px;">
            <h4>Styrian Grand Prix </h4>
            <img src="https://mclaren.bloomreach.io/cdn-cgi/image/format=webp,quality=80/delivery/resources/content/gallery/mclaren-racing/legacy/static_maps/austria-sectors.png">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b51205f28718b692dbd4-flag_of_brazil?" style="height: 15px;">
            <h4>São Paulo Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b4567e76151af3bc78e8-circuit_brazil_racecalendar?width=1480&height=840">
        </li>
        <li class="splide__slide">
            <img src="https://upload.wikimedia.org/wikipedia/commons/b/b4/Flag_of_Turkey.svg" style="height: 15px;">
            <h4>Turkish Grand Prix </h4>
            <img src="https://mclaren.bloomreach.io/cdn-cgi/image/format=webp,quality=80/delivery/resources/content/gallery/mclaren-racing/legacy/static_maps/turkey-sectors.png">
        </li>
        <li class="splide__slide">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Flag_of_Tuscany.svg/1200px-Flag_of_Tuscany.svg.png" style="height: 15px;">
            <h4>Tuscan Grand Prix </h4>
            <img src="https://media.formula1.com/image/upload/f_auto,c_limit,q_auto,w_1320/content/dam/fom-website/2018-redesign-assets/Circuit%20maps%2016x9/Tuscany_Circuit">
        </li>
        <li class="splide__slide">
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b10b05f28718b692dabc-flag_of_usa?" style="height: 15px;">
            <h4>United States Grand Prix </h4>
            <img src="https://cdn.ferrari.com/cms/network/media/img/resize/5e53b008f5d28817071edb4c-circuit_usa_racecalendar?width=1480&height=840">
        </li>`;
let maps = document.querySelector(".maps");
maps.innerHTML += `${splide_string}`;


grid_string = `<h5 for="grid">Grid Position :</h5>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div style="display: grid;height: 500px;">
            <input type="radio" class="btn-check" name="grid" value="1" id="pole" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="pole">
                <h4>⎴</h4> Pole
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="3" id="p3" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p3">
                <h4>⎴</h4> P3
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="5" id="p5" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p5">
                <h4>⎴</h4> P5
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="7" id="p7" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p7">
                <h4>⎴</h4> P7
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="9" id="p9" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p9">
                <h4>⎴</h4> P9
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="11" id="p11" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p11">
                <h4>⎴</h4> P11
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="13" id="p13" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p13">
                <h4>⎴</h4> P13
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="15" id="p15" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p15">
                <h4>⎴</h4> P15
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="17" id="p17" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p17">
                <h4>⎴</h4> P17
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="19" id="p19" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p19">
                <h4>⎴</h4> P19
            </label><br>
        </div>
        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        <div style="display: grid;margin-top: 30px;">
            <input type="radio" class="btn-check" name="grid" value="2" id="p2" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p2">
                <h4>⎴</h4> P2
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="4" id="p4" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p4">
                <h4>⎴</h4> P4
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="6" id="p6" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p6">
                <h4>⎴</h4> P6
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="8" id="p8" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p8">
                <h4>⎴</h4> P8
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="10" id="p10" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p10">
                <h4>⎴</h4> P10
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="12" id="p12" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p12">
                <h4>⎴</h4> P12
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="14" id="p14" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p14">
                <h4>⎴</h4> P14
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="16" id="p16" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p16">
                <h4>⎴</h4> P16
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="18" id="p18" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p18">
                <h4>⎴</h4> P18
            </label><br>
            <input type="radio" class="btn-check" name="grid" value="20" id="p20" autocomplete="off"
                onclick="getSelectedGrid()">
            <label class="btn btn-outline-danger " style="height: 70px;" for="p20">
                <h4>⎴</h4> P20
            </label><br>
        </div>`;
let grids = document.querySelector(".grids");
grids.innerHTML += `${grid_string}`;



function getSelectedPitStop() {
    const selectedRadio = document.querySelector('input[name="stint"]:checked').value;

    if (selectedRadio) {
        console.log(`Pitstop : ${selectedRadio}`);
    }
}

function getSelectedGrid() {
    const selectGrid = document.querySelector('input[name="grid"]:checked').value;
    if (selectGrid) {
        console.log(`Grid Position : ${selectGrid}`);
    }
}

var rainVal = document.getElementById('Rain');
function selectRain() {
    const rainRange = document.querySelector('input[name="rain"]:checked').value;
    if (rainRange) {
        rainVal.value = rainRange;
        console.log(`Rain : ${rainRange}`);
    }
}

const airSlider = document.querySelector('.meanAirTemp')
const airVal = document.getElementById('airTemp')
airVal.value = airSlider.value;
airSlider.oninput = function () {
    airVal.value = airSlider.value;
    // console.log(airVal.value)
}

const trackSlider = document.querySelector('.meanTrackTemp')
const trackVal = document.getElementById('trackTemp')
trackVal.value = trackSlider.value;
trackSlider.oninput = function () {
    trackVal.value = trackSlider.value;
    // console.log(trackVal.value)
}

const humidSlider = document.querySelector('.meanHumid')
const humidVal = document.getElementById('humidity')
humidVal.value = humidSlider.value;
humidSlider.oninput = function () {
    humidVal.value = humidSlider.value;
    // console.log(humidVal.value)
}

function getSelectedDriv() {
    const driver = document.querySelector('input[name="driver"]:checked').value;
    if (driver == 1) {
        console.log(`Driver : ${driver} Max Verstappen`);
    } else if (driver == 2) {
        console.log(`Driver : ${driver} Sergio Perez`);
    }
}

var loader = document.getElementById("preloader");
window.addEventListener("load", function () {
    loader.classList.add("hidden");
    setTimeout(function () {
        loader.style.display = "none";
    }, 500);
});

let map = 4;
async function submitForm(event) {
    event.preventDefault();

    // const audio = new Audio("../static/f1_radio.mp3");
    // audio.play();

    data = {
        circuit: map,
        stint: document.querySelector('input[name="stint"]:checked').value,
        meanAirTemp: airVal.value,
        meanTrackTemp: trackVal.value,
        meanHumid: humidVal.value,
        Rainfall: rainVal.value,
        GridPosition: document.querySelector('input[name="grid"]:checked').value,
        lapNumber: document.querySelector('#lapNumber').value
    }
    console.log(data);

    const response = await fetch('/predict', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify(data)
    });


    const result = await response.json();
    const res = result.prediction;
    var tyre;
    var image;
    var color;
    if (result.prediction == 1) {
        tyre = 'Hard';
        color = 'rgb(62, 184, 255)';
        image = "../static/Hard.png";
    } else if (result.prediction == 2) {
        tyre = 'Medium';
        color = 'white';
        image = "../static/Medium.png";
    } else if (result.prediction == 3) {
        tyre = 'Soft';
        color = 'yellow';
        image = "../static/Soft.png";
    } else if (result.prediction == 4) {
        tyre = 'Intermediate';
        color = 'green';
        image = "../static/Intermediate.png";
    } else if (result.prediction == 5) {
        tyre = 'Supersoft';
        color = 'red';
        image = "../static/Supersoft.png";
    } else if (result.prediction == 6) {
        tyre = 'Ultrasoft';
        color = 'violet';
        image = "../static/Ultrasoft.png";
    } else if (result.prediction == 7) {
        tyre = 'Hypersoft';
        color = 'pink';
        image = "../static/Hypersoft.png";
    } else if (result.prediction == 8) {
        tyre = 'Wet';
        color = 'blue';
        image = "../static/FullWet.png";
    }

    document.getElementById('predictionResult').innerHTML =
        `<h1>Strategy : <b style="color: ${color};">${tyre} Tyres</b></h1> <br>
                    <div class="move-rotate">
                        <img src=${image}>
                    </div>    
                `;
}

document.addEventListener('DOMContentLoaded', function () {
    var splide = new Splide('.splide', {
        trimSpace: false,
        focus: 'center',
        perPage: 3,
        padding: '10%',
        wheel: false,
        start: 4,
    });
    document.addEventListener('keydown', function (event) {
        if (event.key === 'd' || event.key === 'D') {
            splide.go('>');
        } else if (event.key === 'a' || event.key === 'A') {
            splide.go('<');
        }
    });
    splide.on('moved', function (newIndex) {
        console.log('Focused Image Number:', newIndex); // Log the focused image number (index starts from 0)
        map = newIndex;
    });
    splide.mount();
});
